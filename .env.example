# =============================================================================
# TELEGRAM VPN MINI APP - ENVIRONMENT VARIABLES
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000
APP_URL=https://your-domain.com

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL="postgresql://vpn_user:secure_password@localhost:5432/vpn_db?schema=public"

# Prisma
# Run after deploy: npx prisma migrate deploy && npx prisma generate

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6380
# Note: Port 6380 is used in docker-compose to avoid conflicts
REDIS_PASSWORD=
# Set password in production!

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# -----------------------------------------------------------------------------
# Telegram Bot
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
TELEGRAM_BOT_USERNAME=your_bot_username

# Telegram Mini App
TELEGRAM_WEBAPP_URL=https://t.me/your_bot_username/app

# -----------------------------------------------------------------------------
# TON Blockchain
# -----------------------------------------------------------------------------
# TON Connect for payments
TON_NETWORK=mainnet
# mainnet | testnet

TON_API_KEY=your-ton-api-key-from-toncenter
TON_API_ENDPOINT=https://toncenter.com/api/v2

# Merchant wallet for receiving payments
TON_MERCHANT_WALLET=EQDabc123...your-ton-wallet-address...xyz

# -----------------------------------------------------------------------------
# WireGuard & VPN Servers
# -----------------------------------------------------------------------------
# IP Pool configuration
VPN_IP_POOL_START=10.0.0.10
VPN_IP_POOL_END=10.0.0.254
VPN_SUBNET_MASK=24

# Default WireGuard port
WG_DEFAULT_PORT=51820

# Agent API timeout
AGENT_REQUEST_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=info
# debug | info | warn | error

LOG_FILE_PATH=./logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# CORS
CORS_ORIGIN=https://your-domain.com,https://t.me

# Rate Limiting (requests per window)
RATE_LIMIT_WINDOW_MS=900000
# 15 minutes in ms
RATE_LIMIT_MAX_REQUESTS=100

# Session
SESSION_SECRET=your-session-secret-change-in-production

# -----------------------------------------------------------------------------
# Notifications
# -----------------------------------------------------------------------------
# Enable/disable notification types
NOTIFICATIONS_ENABLED=true
BROADCAST_NOTIFICATIONS_ENABLED=true

# -----------------------------------------------------------------------------
# Payments & Referrals
# -----------------------------------------------------------------------------
# Referral commissions (in %)
REFERRAL_FIRST_PAYMENT_PERCENT=20
REFERRAL_RECURRING_PERCENT=10

# Minimum withdrawal amount (in TON)
REFERRAL_MIN_WITHDRAWAL=5

# Withdrawals enabled
REFERRAL_WITHDRAWALS_ENABLED=false

# -----------------------------------------------------------------------------
# Monitoring
# -----------------------------------------------------------------------------
# Health check intervals (in seconds)
HEALTH_CHECK_INTERVAL=300
# 5 minutes

# Metrics retention (in days)
METRICS_RETENTION_DAYS=90

# Abuse detection thresholds
ABUSE_BANDWIDTH_THRESHOLD_GB=100
ABUSE_MAX_CONFIGS=5

# -----------------------------------------------------------------------------
# Admin
# -----------------------------------------------------------------------------
# Admin panel URL
ADMIN_PANEL_URL=/admin

# Audit log retention (in days)
AUDIT_LOG_RETENTION_DAYS=365

# -----------------------------------------------------------------------------
# Optional: External Services
# -----------------------------------------------------------------------------
# Email notifications (optional)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# EMAIL_FROM=noreply@your-domain.com

# Sentry error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Analytics (optional)
# ANALYTICS_ID=G-XXXXXXXXXX

# -----------------------------------------------------------------------------
# Development Only
# -----------------------------------------------------------------------------
# Mock TON payments in development
# MOCK_TON_PAYMENTS=true

# Disable auth in development (DANGEROUS!)
# DISABLE_AUTH=false

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
#
# 1. Copy this file to .env in production
# 2. Replace ALL placeholders with real values
# 3. Generate secure secrets:
#    - JWT_SECRET: openssl rand -base64 64
#    - JWT_REFRESH_SECRET: openssl rand -base64 64
#    - SESSION_SECRET: openssl rand -base64 32
#
# 4. Set strong passwords for:
#    - DATABASE_URL (PostgreSQL)
#    - REDIS_PASSWORD
#
# 5. Configure Telegram Bot:
#    - Create bot via @BotFather
#    - Get TELEGRAM_BOT_TOKEN
#    - Set up Mini App in bot settings
#
# 6. Set up TON wallet:
#    - Create merchant wallet
#    - Get API key from TON Center
#
# 7. Security:
#    - NEVER commit .env to git!
#    - Use environment-specific .env files
#    - Rotate secrets regularly
#
# =============================================================================
