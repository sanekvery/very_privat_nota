# Telegram VPN Mini App

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ VPN Mini App –¥–ª—è Telegram —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TON –ø–ª–∞—Ç–µ–∂–µ–π, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **VPN Management**: WireGuard –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º IP –ø—É–ª–æ–º
- **Subscription Plans**: –ë–∞–∑–æ–≤—ã–π (1), –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π (3), –°–µ–º–µ–π–Ω—ã–π (5) + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–ª–∞–Ω—ã
- **TON Payments**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TON –±–ª–æ–∫—á–µ–π–Ω–æ–º –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **Promo Codes**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —Ç–∞—Ä–∏—Ñ–Ω—ã–º –ø–ª–∞–Ω–∞–º
- **Referral System**: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏ –∏ –≤—ã–≤–æ–¥–æ–º —Å—Ä–µ–¥—Å—Ç–≤
- **Support System**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–∫–µ—Ç–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **News Module**: –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Markdown
- **Monitoring**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å health checks
- **Multi-language**: –†—É—Å—Å–∫–∏–π –∏ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫–∏
- **Admin Panel**: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–º

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Next.js 16** - React framework —Å App Router
- **TypeScript 5** - –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Prisma 6** - Type-safe ORM
- **PostgreSQL 16** - –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis 7** - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ event bus
- **WireGuard** - VPN –ø—Ä–æ—Ç–æ–∫–æ–ª

### Frontend
- **React 19** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **shadcn/ui** - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **Tailwind CSS 4** - –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **next-intl** - –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- **Zod** - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º

### DevOps
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Docker Compose** - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Nginx** - Reverse proxy —Å rate limiting
- **PM2** - Process manager –¥–ª—è production

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20+
- Docker –∏ Docker Compose
- npm 10+

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone <repository-url>
   cd telegram-vpn-miniapp
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   ```bash
   cp docker/.env.example docker/.env
   ```

   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker/.env` –∏ —É–∫–∞–∂–∏—Ç–µ:
   - `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - `ADMIN_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
   - –î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç**

   **–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
   ```bash
   npm run docker:dev
   ```

   **Production —Ä–µ–∂–∏–º:**
   ```bash
   npm run docker:up
   ```

4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| Mini App | http://localhost | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| Admin Panel | http://localhost/admin | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Å–µ–∫—Ä–µ—Ç –∏–∑ .env) |
| Prisma Studio | http://localhost:5555 | GUI –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (dev mode) |
| Mailpit | http://localhost:8025 | Email —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (dev mode) |
| PostgreSQL | localhost:5432 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| Redis | localhost:6379 | –ö–µ—à |

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤ –±–∞–∑–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã:

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**: Telegram ID `123456789`, username `admin`
- **–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã**: Basic (5 TON), Pro (12 TON), Family (20 TON)
- **VPN –°–µ—Ä–≤–µ—Ä—ã**: 3 —Å–µ—Ä–≤–µ—Ä–∞ (NL, DE, US)
- **–ü—Ä–æ–º–æ–∫–æ–¥—ã**: `WELCOME2025` (7 –¥–Ω–µ–π Basic), `TESTPROMO` (14 –¥–Ω–µ–π Pro)

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   npm install
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL –∏ Redis**
   ```bash
   docker-compose -f docker/docker-compose.yml up postgres redis -d
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`**
   ```bash
   cp docker/.env.example .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ DATABASE_URL –∏ REDIS_URL
   ```

4. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏**
   ```bash
   npm run prisma:migrate
   npm run db:seed
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä**
   ```bash
   npm run dev
   ```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# Prisma
npm run prisma:generate       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npm run prisma:migrate        # –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npm run prisma:migrate:deploy # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (production)
npm run prisma:studio         # –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
npm run db:seed               # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:reset              # –°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev                   # Dev —Å–µ—Ä–≤–µ—Ä
npm run build                 # Production build
npm run start                 # Production —Å–µ—Ä–≤–µ—Ä
npm run lint                  # ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run lint:fix              # ESLint –∞–≤—Ç–æ—Ñ–∏–∫—Å
npm run typecheck             # TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run format                # Prettier —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# Docker
npm run docker:up             # –ó–∞–ø—É—Å–∫ production
npm run docker:down           # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
npm run docker:logs           # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
npm run docker:dev            # –ó–∞–ø—É—Å–∫ dev —Ä–µ–∂–∏–º–∞

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm test                      # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
npm run test:watch            # Watch —Ä–µ–∂–∏–º
npm run test:coverage         # Coverage –æ—Ç—á–µ—Ç
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram-vpn-miniapp/
‚îú‚îÄ‚îÄ docker/                   # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml    # Production compose
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.dev.yml # Dev overrides
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile            # Production –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.dev        # Dev –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf            # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ init-db.sql           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ prisma/                   # Prisma ORM
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma         # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts               # Seed –¥–∞–Ω–Ω—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ src/                      # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ app/                  # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [locale]/         # –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Mini App)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/        # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/              # API routes
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth/         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ subscriptions/# –ü–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ payments/     # –ü–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ vpn/          # VPN –∫–æ–Ω—Ñ–∏–≥–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ servers/      # –°–µ—Ä–≤–µ—Ä—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ promo/        # –ü—Ä–æ–º–æ–∫–æ–¥—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ referrals/    # –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ support/      # –ü–æ–¥–¥–µ—Ä–∂–∫–∞
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ news/         # –ù–æ–≤–æ—Å—Ç–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ modules/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (13 –º–æ–¥—É–ª–µ–π)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/             # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscriptions/    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments/         # –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vpn/              # VPN —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ servers/          # –°–µ—Ä–≤–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ monitoring/       # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ referrals/        # –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ promo/            # –ü—Ä–æ–º–æ–∫–æ–¥—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ support/          # –ü–æ–¥–¥–µ—Ä–∂–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notifications/    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ news/             # –ù–æ–≤–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/        # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ agent/            # VPN Agent API
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/           # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/               # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/         # –ë–∏–∑–Ω–µ—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layouts/          # Layouts
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma.ts         # Prisma client
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis.ts          # Redis client
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.ts         # Winston logger
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ types/                # TypeScript —Ç–∏–ø—ã
‚îÇ
‚îú‚îÄ‚îÄ public/                   # –°—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ tests/                    # –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ docs/                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–µ–∑–∞–≤–∏—Å–∏–º –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å:

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

1. **auth** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram WebApp (HMAC SHA-256) –∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - üìñ [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](src/modules/auth/README.md)
   - Telegram WebApp integration
   - Session management (Redis, 30 days TTL)
   - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ (startParam)

2. **vpn** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è WireGuard –∫–æ–Ω—Ñ–∏–≥–æ–≤, IP pool —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Ä–æ—Ç–∞—Ü–∏—è
   - üìñ [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](src/modules/vpn/README.md)
   - **CRITICAL:** SELECT FOR UPDATE –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race conditions
   - Curve25519 (X25519) key generation
   - VPN Agent client (HTTPS —Å self-signed cert)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

3. **subscriptions** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–º–∏ –ø–ª–∞–Ω–∞–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - üìñ [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](src/modules/subscriptions/README.md)
   - SubscriptionPlanService (CRUD –ø–ª–∞–Ω–æ–≤, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
   - SubscriptionService (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞, –∞–≤—Ç–æ—ç–∫—Å–ø–∏—Ä–∞—Ü–∏—è)
   - One Active Subscription Rule
   - Extend vs Renew –ª–æ–≥–∏–∫–∞
   - Cron jobs –¥–ª—è –∞–≤—Ç–æ–∏—Å—Ç–µ—á–µ–Ω–∏—è

4. **payments** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TON blockchain, –ø—Ä–æ–º–æ–∫–æ–¥—ã, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
   - üìñ [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](src/modules/payments/README.md)
   - PaymentService (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π, TON –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, webhooks, —Ä–µ—Ñ–∞–Ω–¥—ã)
   - TonService (TON blockchain –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, mock mode –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
   - PromoCodeService (—Å–æ–∑–¥–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ
   - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ (20% –ø–µ—Ä–≤—ã–π –ø–ª–∞—Ç–µ–∂, 10% –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ)
   - Payment webhook –æ—Ç TON + manual verification
   - Admin endpoints (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–µ—Ñ–∞–Ω–¥—ã)

5. **lib** - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Prisma, Redis, Logger, Errors, Validation)
   - üìñ [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](src/lib/README.md)
   - Singleton Prisma/Redis clients
   - Winston —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å HTTP —Å—Ç–∞—Ç—É—Å–∞–º–∏
   - Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º
   - API response helpers

### üìù –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
6. **servers** - CRUD —Å–µ—Ä–≤–µ—Ä–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, load balancing
7. **monitoring** - Health checks, –º–µ—Ç—Ä–∏–∫–∏, –¥–µ—Ç–µ–∫—Ü–∏—è –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
8. **referrals** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
9. **support** - –°–∏—Å—Ç–µ–º–∞ —Ç–∏–∫–µ—Ç–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
10. **notifications** - Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏
11. **news** - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π —Å Markdown
12. **analytics** - –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- üìñ **[API Examples](API_EXAMPLES.md)** - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API (React, TypeScript, fetch)
- üìñ **[AUTH Module](src/modules/auth/README.md)** - Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–µ—Å—Å–∏–∏, middleware
- üìñ **[VPN Module](src/modules/vpn/README.md)** - WireGuard, IP Pool, Agent client, –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- üìñ **[SUBSCRIPTIONS Module](src/modules/subscriptions/README.md)** - –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã, –ø–æ–¥–ø–∏—Å–∫–∏, lifecycle management
- üìñ **[PAYMENTS Module](src/modules/payments/README.md)** - TON blockchain, –ø—Ä–æ–º–æ–∫–æ–¥—ã, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- üìñ **[LIB Utilities](src/lib/README.md)** - Prisma, Redis, Logger, Errors, Validation

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**Race Condition Protection (VPN Module):**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `SELECT FOR UPDATE SKIP LOCKED` –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è IP
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º rollback
- –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: [VPN Module README](src/modules/vpn/README.md#critical-components)

**Security:**
- HMAC SHA-256 –≤–∞–ª–∏–¥–∞—Ü–∏—è Telegram initData
- Bearer token –¥–ª—è VPN Agent API
- IP whitelist –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö
- Audit trail –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Mock —Ä–µ–∂–∏–º (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –º–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
# –í docker/.env
TELEGRAM_MOCK_MODE=true    # –ú–æ–∫ Telegram WebApp API
TON_MOCK_MODE=true         # –ú–æ–∫ TON –ø–ª–∞—Ç–µ–∂–µ–π
VPN_AGENT_MOCK=true        # –ú–æ–∫ VPN –∞–≥–µ–Ω—Ç–∞
```

### Feature Flags

```bash
FEATURE_REFERRALS=true      # –í–∫–ª—é—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
FEATURE_WITHDRAWALS=false   # –í–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
FEATURE_PROMO_CODES=true    # –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥—ã
FEATURE_NEWS=true           # –í–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å –Ω–æ–≤–æ—Å—Ç–µ–π
```

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

```bash
REFERRAL_FIRST_PAYMENT_PERCENTAGE=20  # –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞
REFERRAL_RECURRING_PERCENTAGE=10      # –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö
REFERRAL_MIN_WITHDRAWAL=100           # –ú–∏–Ω–∏–º—É–º –¥–ª—è –≤—ã–≤–æ–¥–∞ (TON)
```

## Deployment

### Production –¥–µ–ø–ª–æ–π

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
   ```bash
   cp docker/.env.example docker/.env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ production –∑–Ω–∞—á–µ–Ω–∏—è
   ```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ**
   ```bash
   docker-compose -f docker/docker-compose.yml up -d
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ health**
   ```bash
   curl http://localhost/health
   ```

### SSL/HTTPS

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è HTTPS —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ HTTPS –±–ª–æ–∫ –≤ `docker/nginx.conf` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ `docker/ssl/`:

```
docker/ssl/
‚îú‚îÄ‚îÄ cert.pem
‚îî‚îÄ‚îÄ key.pem
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Docker:

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose -f docker/docker-compose.yml logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose -f docker/docker-compose.yml logs -f app
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç –≤ `/app/logs` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–º–∞—É–Ω—Ç–∏—Ç—Å—è –≤ `./logs`).

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ Rate limiting –Ω–∞ API endpoints (100 req/min –¥–ª—è users, 1000 req/min –¥–ª—è admin)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (Prisma ORM)
- ‚úÖ Bearer token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è VPN –∞–≥–µ–Ω—Ç–∞
- ‚úÖ IP Pool —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å SELECT FOR UPDATE –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π
- ‚úÖ Admin secret –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ Strict TypeScript mode
- ‚úÖ Audit log –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∞

## Roadmap

### MVP v1.0 (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è)
- [x] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [x] Prisma —Å—Ö–µ–º–∞ –∏ seed –¥–∞–Ω–Ω—ã–µ
- [x] LIB utilities (Prisma, Redis, Logger, Errors, Validation)
- [x] AUTH –º–æ–¥—É–ª—å (Telegram WebApp, sessions, middleware)
- [x] VPN –º–æ–¥—É–ª—å (WireGuard, IP Pool, Agent client)
- [x] SUBSCRIPTIONS –º–æ–¥—É–ª—å (Plans, Lifecycle, Auto-expiration)
- [x] PAYMENTS –º–æ–¥—É–ª—å (TON integration, –ø—Ä–æ–º–æ–∫–æ–¥—ã, —Ä–µ—Ñ–µ—Ä–∞–ª—ã)
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π (AUTH, VPN, SUBSCRIPTIONS, PAYMENTS, LIB)
- [x] API Examples
- [ ] SERVERS –º–æ–¥—É–ª—å
- [ ] MONITORING –º–æ–¥—É–ª—å
- [ ] –û—Å—Ç–∞–ª—å–Ω—ã–µ 5 –º–æ–¥—É–ª–µ–π (REFERRALS, SUPPORT, NOTIFICATIONS, NEWS, ANALYTICS)
- [ ] Mini App UI
- [ ] Admin Panel UI
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### v1.1
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞

### v2.0
- [ ] Partner API
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- [ ] Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (iOS/Android)

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - All rights reserved

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É —Ç–∏–∫–µ—Ç–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

**Built with ‚ù§Ô∏è using Next.js, Prisma, and WireGuard**
